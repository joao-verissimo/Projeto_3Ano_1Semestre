<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="840px" preserveAspectRatio="none" style="width:2523px;height:840px;" version="1.1" viewBox="0 0 2523 840" width="2523px" zoomAndPan="magnify"><defs><filter height="300%" id="f10rb335gcvp6m" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f10rb335gcvp6m)" height="713.1875" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="384" y="69.4297"/><rect fill="#FFFFFF" filter="url(#f10rb335gcvp6m)" height="654.9219" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="745" y="98.5625"/><rect fill="#FFFFFF" filter="url(#f10rb335gcvp6m)" height="553.5234" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1042" y="170.8281"/><rect fill="#FFFFFF" filter="url(#f10rb335gcvp6m)" height="495.2578" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1339" y="199.9609"/><rect fill="#FFFFFF" filter="url(#f10rb335gcvp6m)" height="145.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1471" y="229.0938"/><rect fill="#FFFFFF" filter="url(#f10rb335gcvp6m)" height="87.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1616" y="258.2266"/><rect fill="#FFFFFF" filter="url(#f10rb335gcvp6m)" height="145.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1616" y="462.1563"/><rect fill="#FFFFFF" filter="url(#f10rb335gcvp6m)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1717.5" y="403.8906"/><rect fill="#FFFFFF" filter="url(#f10rb335gcvp6m)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1989" y="287.3594"/><rect fill="#FFFFFF" filter="url(#f10rb335gcvp6m)" height="87.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1989" y="491.2891"/><rect fill="#FFFFFF" filter="url(#f10rb335gcvp6m)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2093.5" y="636.9531"/><rect fill="#FFFFFF" filter="url(#f10rb335gcvp6m)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2353.5" y="520.4219"/><rect fill="#FFFFFF" filter="url(#f10rb335gcvp6m)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2468.5" y="127.6953"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="33" x2="33" y1="38.2969" y2="800.6172"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="389" x2="389" y1="38.2969" y2="800.6172"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="749.5" x2="749.5" y1="38.2969" y2="800.6172"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1046.5" x2="1046.5" y1="38.2969" y2="800.6172"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1344" x2="1344" y1="38.2969" y2="800.6172"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1476" x2="1476" y1="38.2969" y2="800.6172"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1620.5" x2="1620.5" y1="38.2969" y2="800.6172"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1722.5" x2="1722.5" y1="38.2969" y2="800.6172"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1994" x2="1994" y1="38.2969" y2="800.6172"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="2098" x2="2098" y1="38.2969" y2="800.6172"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="2217" x2="2217" y1="38.2969" y2="800.6172"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="2358" x2="2358" y1="38.2969" y2="800.6172"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="2473" x2="2473" y1="38.2969" y2="800.6172"/><rect fill="#FEFECE" filter="url(#f10rb335gcvp6m)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="46" x="8" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="15" y="22.9951">User</text><rect fill="#FEFECE" filter="url(#f10rb335gcvp6m)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="46" x="8" y="799.6172"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="15" y="819.6123">User</text><rect fill="#FEFECE" filter="url(#f10rb335gcvp6m)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="118" x="328" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="104" x="335" y="22.9951">IFloorController</text><rect fill="#FEFECE" filter="url(#f10rb335gcvp6m)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="118" x="328" y="799.6172"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="104" x="335" y="819.6123">IFloorController</text><rect fill="#FEFECE" filter="url(#f10rb335gcvp6m)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="115" x="690.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="101" x="697.5" y="22.9951">FloorController</text><rect fill="#FEFECE" filter="url(#f10rb335gcvp6m)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="115" x="690.5" y="799.6172"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="101" x="697.5" y="819.6123">FloorController</text><rect fill="#FEFECE" filter="url(#f10rb335gcvp6m)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="101" x="994.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="87" x="1001.5" y="22.9951">IFloorService</text><rect fill="#FEFECE" filter="url(#f10rb335gcvp6m)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="101" x="994.5" y="799.6172"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="87" x="1001.5" y="819.6123">IFloorService</text><rect fill="#FEFECE" filter="url(#f10rb335gcvp6m)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="98" x="1293" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="84" x="1300" y="22.9951">FloorService</text><rect fill="#FEFECE" filter="url(#f10rb335gcvp6m)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="98" x="1293" y="799.6172"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="84" x="1300" y="819.6123">FloorService</text><rect fill="#FEFECE" filter="url(#f10rb335gcvp6m)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="88" x="1430" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="74" x="1437" y="22.9951">IFloorRepo</text><rect fill="#FEFECE" filter="url(#f10rb335gcvp6m)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="88" x="1430" y="799.6172"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="74" x="1437" y="819.6123">IFloorRepo</text><rect fill="#FEFECE" filter="url(#f10rb335gcvp6m)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="85" x="1576.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="1583.5" y="22.9951">FloorRepo</text><rect fill="#FEFECE" filter="url(#f10rb335gcvp6m)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="85" x="1576.5" y="799.6172"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="1583.5" y="819.6123">FloorRepo</text><rect fill="#FEFECE" filter="url(#f10rb335gcvp6m)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="90" x="1675.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="76" x="1682.5" y="22.9951">Floor Entity</text><rect fill="#FEFECE" filter="url(#f10rb335gcvp6m)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="90" x="1675.5" y="799.6172"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="76" x="1682.5" y="819.6123">Floor Entity</text><rect fill="#FEFECE" filter="url(#f10rb335gcvp6m)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="104" x="1940" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="1947" y="22.9951">FloorSchema</text><rect fill="#FEFECE" filter="url(#f10rb335gcvp6m)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="104" x="1940" y="799.6172"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="1947" y="819.6123">FloorSchema</text><rect fill="#FEFECE" filter="url(#f10rb335gcvp6m)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="77" x="2058" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="63" x="2065" y="22.9951">FloorMap</text><rect fill="#FEFECE" filter="url(#f10rb335gcvp6m)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="77" x="2058" y="799.6172"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="63" x="2065" y="819.6123">FloorMap</text><rect fill="#FEFECE" filter="url(#f10rb335gcvp6m)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="133" x="2149" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="119" x="2156" y="22.9951">IFloorPersistence</text><rect fill="#FEFECE" filter="url(#f10rb335gcvp6m)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="133" x="2149" y="799.6172"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="119" x="2156" y="819.6123">IFloorPersistence</text><rect fill="#FEFECE" filter="url(#f10rb335gcvp6m)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="121" x="2296" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="107" x="2303" y="22.9951">FloorDocument</text><rect fill="#FEFECE" filter="url(#f10rb335gcvp6m)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="121" x="2296" y="799.6172"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="107" x="2303" y="819.6123">FloorDocument</text><rect fill="#FEFECE" filter="url(#f10rb335gcvp6m)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="81" x="2431" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="67" x="2438" y="22.9951">ConfigFile</text><rect fill="#FEFECE" filter="url(#f10rb335gcvp6m)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="81" x="2431" y="799.6172"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="67" x="2438" y="819.6123">ConfigFile</text><rect fill="#FFFFFF" filter="url(#f10rb335gcvp6m)" height="713.1875" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="384" y="69.4297"/><rect fill="#FFFFFF" filter="url(#f10rb335gcvp6m)" height="654.9219" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="745" y="98.5625"/><rect fill="#FFFFFF" filter="url(#f10rb335gcvp6m)" height="553.5234" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1042" y="170.8281"/><rect fill="#FFFFFF" filter="url(#f10rb335gcvp6m)" height="495.2578" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1339" y="199.9609"/><rect fill="#FFFFFF" filter="url(#f10rb335gcvp6m)" height="145.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1471" y="229.0938"/><rect fill="#FFFFFF" filter="url(#f10rb335gcvp6m)" height="87.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1616" y="258.2266"/><rect fill="#FFFFFF" filter="url(#f10rb335gcvp6m)" height="145.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1616" y="462.1563"/><rect fill="#FFFFFF" filter="url(#f10rb335gcvp6m)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1717.5" y="403.8906"/><rect fill="#FFFFFF" filter="url(#f10rb335gcvp6m)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1989" y="287.3594"/><rect fill="#FFFFFF" filter="url(#f10rb335gcvp6m)" height="87.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1989" y="491.2891"/><rect fill="#FFFFFF" filter="url(#f10rb335gcvp6m)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2093.5" y="636.9531"/><rect fill="#FFFFFF" filter="url(#f10rb335gcvp6m)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2353.5" y="520.4219"/><rect fill="#FFFFFF" filter="url(#f10rb335gcvp6m)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2468.5" y="127.6953"/><polygon fill="#A80036" points="372,65.4297,382,69.4297,372,73.4297,376,69.4297" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="33" x2="378" y1="69.4297" y2="69.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="332" x="40" y="64.3638">createPassageBetweenFloors(floorID, passageData)</text><polygon fill="#A80036" points="733,94.5625,743,98.5625,733,102.5625,737,98.5625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="394" x2="739" y1="98.5625" y2="98.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="332" x="401" y="93.4966">createPassageBetweenFloors(floorID, passageData)</text><polygon fill="#A80036" points="2456.5,123.6953,2466.5,127.6953,2456.5,131.6953,2460.5,127.6953" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="755" x2="2462.5" y1="127.6953" y2="127.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="762" y="122.6294">Injects Service</text><polygon fill="#A80036" points="766,137.6953,756,141.6953,766,145.6953,762,141.6953" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="760" x2="2472.5" y1="141.6953" y2="141.6953"/><polygon fill="#A80036" points="1030,166.8281,1040,170.8281,1030,174.8281,1034,170.8281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="755" x2="1036" y1="170.8281" y2="170.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="268" x="762" y="165.7622">addPassageToFloor(floorID, passageData)</text><polygon fill="#A80036" points="1327,195.9609,1337,199.9609,1327,203.9609,1331,199.9609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1052" x2="1333" y1="199.9609" y2="199.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="268" x="1059" y="194.895">addPassageToFloor(floorID, passageData)</text><polygon fill="#A80036" points="1459,225.0938,1469,229.0938,1459,233.0938,1463,229.0938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1349" x2="1465" y1="229.0938" y2="229.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="1356" y="224.0278">findByID(floorID)</text><polygon fill="#A80036" points="1604,254.2266,1614,258.2266,1604,262.2266,1608,258.2266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1481" x2="1610" y1="258.2266" y2="258.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="1488" y="253.1606">findByID(floorID)</text><polygon fill="#A80036" points="1977,283.3594,1987,287.3594,1977,291.3594,1981,287.3594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1626" x2="1983" y1="287.3594" y2="287.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="344" x="1633" y="282.2935">query as FilterQuery&lt;IFloorPersistence &amp; Document&gt;</text><polygon fill="#A80036" points="1637,312.4922,1627,316.4922,1637,320.4922,1633,316.4922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1631" x2="1993" y1="316.4922" y2="316.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="1643" y="311.4263">return floor entity</text><polygon fill="#A80036" points="1492,341.625,1482,345.625,1492,349.625,1488,345.625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1486" x2="1620" y1="345.625" y2="345.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="1498" y="340.5591">return floor entity</text><polygon fill="#A80036" points="1360,370.7578,1350,374.7578,1360,378.7578,1356,374.7578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1354" x2="1475" y1="374.7578" y2="374.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="1366" y="369.6919">floor entity</text><polygon fill="#A80036" points="1705.5,399.8906,1715.5,403.8906,1705.5,407.8906,1709.5,403.8906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1349" x2="1711.5" y1="403.8906" y2="403.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="223" x="1356" y="398.8247">floor.passages.push(passageData)</text><polygon fill="#A80036" points="1360,429.0234,1350,433.0234,1360,437.0234,1356,433.0234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1354" x2="1721.5" y1="433.0234" y2="433.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="125" x="1366" y="427.9575">updated floor entity</text><polygon fill="#A80036" points="1604,458.1563,1614,462.1563,1604,466.1563,1608,462.1563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1349" x2="1610" y1="462.1563" y2="462.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="165" x="1356" y="457.0903">save(updated floor entity)</text><polygon fill="#A80036" points="1977,487.2891,1987,491.2891,1977,495.2891,1981,491.2891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1626" x2="1983" y1="491.2891" y2="491.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="95" x="1633" y="486.2231">findOne(query)</text><polygon fill="#A80036" points="2341.5,516.4219,2351.5,520.4219,2341.5,524.4219,2345.5,520.4219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1999" x2="2347.5" y1="520.4219" y2="520.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="87" x="2006" y="515.356">save rawFloor</text><polygon fill="#A80036" points="2010,545.5547,2000,549.5547,2010,553.5547,2006,549.5547" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="2004" x2="2357.5" y1="549.5547" y2="549.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="182" x="2016" y="544.4888">return saved floor document</text><polygon fill="#A80036" points="1637,574.6875,1627,578.6875,1637,582.6875,1633,578.6875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1631" x2="1993" y1="578.6875" y2="578.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="153" x="1643" y="573.6216">return saved floor entity</text><polygon fill="#A80036" points="1360,603.8203,1350,607.8203,1360,611.8203,1356,607.8203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1354" x2="1620" y1="607.8203" y2="607.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="110" x="1366" y="602.7544">saved floor entity</text><polygon fill="#A80036" points="2081.5,632.9531,2091.5,636.9531,2081.5,640.9531,2085.5,636.9531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1349" x2="2087.5" y1="636.9531" y2="636.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="299" x="1356" y="631.8872">FloorDTO = FloorMap.toDTO(saved floor entity)</text><polygon fill="#A80036" points="1360,662.0859,1350,666.0859,1360,670.0859,1356,666.0859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1354" x2="2097.5" y1="666.0859" y2="666.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="108" x="1366" y="661.02">returns FloorDTO</text><polygon fill="#A80036" points="1063,691.2188,1053,695.2188,1063,699.2188,1059,695.2188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1057" x2="1343" y1="695.2188" y2="695.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="101" x="1069" y="690.1528">return FloorDTO</text><polygon fill="#A80036" points="766,720.3516,756,724.3516,766,728.3516,762,724.3516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="760" x2="1046" y1="724.3516" y2="724.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="772" y="719.2856">Return FloorDTO</text><polygon fill="#A80036" points="405,749.4844,395,753.4844,405,757.4844,401,753.4844" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="399" x2="749" y1="753.4844" y2="753.4844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="312" x="411" y="748.4185">Send response with status 200 and the FloorDTO</text><polygon fill="#A80036" points="44,778.6172,34,782.6172,44,786.6172,40,782.6172" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="38" x2="388" y1="782.6172" y2="782.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="312" x="50" y="777.5513">Send response with status 200 and the FloorDTO</text><!--MD5=[55f76c83e2069a85b8e0e9a589e329c1]
@startuml US240_LEVEL3

participant "User" as U
participant "IFloorController" as IFC
participant "FloorController" as FC
participant "IFloorService" as IFS
participant "FloorService" as FS
participant "IFloorRepo" as IFR
participant "FloorRepo" as FR
participant "Floor Entity" as FE
participant "FloorSchema" as FSCH
participant "FloorMap" as FM
participant "IFloorPersistence" as IFP
participant "FloorDocument" as FD
participant "ConfigFile" as CONF

U -> IFC: createPassageBetweenFloors(floorID, passageData)
activate IFC

IFC -> FC: createPassageBetweenFloors(floorID, passageData)
activate FC
FC -> CONF: Injects Service
activate CONF
CONF -> FC
deactivate CONF
FC -> IFS: addPassageToFloor(floorID, passageData)
activate IFS

IFS -> FS: addPassageToFloor(floorID, passageData)
activate FS

FS -> IFR: findByID(floorID)
activate IFR

IFR -> FR: findByID(floorID)
activate FR

FR -> FSCH: query as FilterQuery<IFloorPersistence & Document>
activate FSCH

FSCH - -> FR: return floor entity
deactivate FSCH

FR - -> IFR: return floor entity
deactivate FR

IFR - -> FS: floor entity
deactivate IFR

FS -> FE: floor.passages.push(passageData)
activate FE

FE - -> FS: updated floor entity
deactivate FE

FS -> FR: save(updated floor entity)
activate FR

FR -> FSCH: findOne(query)
activate FSCH

FSCH -> FD: save rawFloor
activate FD

FD - -> FSCH: return saved floor document
deactivate FD

FSCH - -> FR: return saved floor entity
deactivate FSCH

FR - -> FS: saved floor entity
deactivate FR

FS -> FM: FloorDTO = FloorMap.toDTO(saved floor entity)
activate FM

FM - -> FS: returns FloorDTO
deactivate FM

FS - -> IFS: return FloorDTO
deactivate FS

IFS -> FC: Return FloorDTO
deactivate IFS

FC -> IFC: Send response with status 200 and the FloorDTO
deactivate FC

IFC -> U: Send response with status 200 and the FloorDTO
deactivate IFC

@enduml

PlantUML version 1.2020.02(Sun Mar 01 10:22:07 UTC 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.21+9
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>