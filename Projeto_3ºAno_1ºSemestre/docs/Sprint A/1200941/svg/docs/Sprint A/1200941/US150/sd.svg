<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1165px" preserveAspectRatio="none" style="width:2734px;height:1165px;" version="1.1" viewBox="0 0 2734 1165" width="2734px" zoomAndPan="magnify"><defs><filter height="300%" id="f155xusad7zo6a" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f155xusad7zo6a)" height="1046.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="402" y="69.4297"/><rect fill="#FFFFFF" filter="url(#f155xusad7zo6a)" height="1016.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="766" y="98.5625"/><rect fill="#FFFFFF" filter="url(#f155xusad7zo6a)" height="945.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1015" y="170.8281"/><rect fill="#FFFFFF" filter="url(#f155xusad7zo6a)" height="915" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1304" y="199.9609"/><rect fill="#FFFFFF" filter="url(#f155xusad7zo6a)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1538" y="229.0938"/><rect fill="#FFFFFF" filter="url(#f155xusad7zo6a)" height="203.9297" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1538" y="536.9609"/><rect fill="#FFFFFF" filter="url(#f155xusad7zo6a)" height="85.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1736" y="258.2266"/><rect fill="#FFFFFF" filter="url(#f155xusad7zo6a)" height="145.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1736" y="566.0938"/><rect fill="#FFFFFF" filter="url(#f155xusad7zo6a)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1950" y="595.2266"/><rect fill="#FFFFFF" filter="url(#f155xusad7zo6a)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1950" y="770.0234"/><rect fill="#FFFFFF" filter="url(#f155xusad7zo6a)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2072.5" y="454.5625"/><rect fill="#FFFFFF" filter="url(#f155xusad7zo6a)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2182.5" y="127.6953"/><rect fill="#FFFFFF" filter="url(#f155xusad7zo6a)" height="42" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2314" y="272.2266"/><rect fill="#FFFFFF" filter="url(#f155xusad7zo6a)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2480.5" y="286.2266"/><rect fill="#FFFFFF" filter="url(#f155xusad7zo6a)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2632.5" y="653.4922"/><rect fill="#FFFFFF" filter="url(#f155xusad7zo6a)" height="587.1328" style="stroke: #000000; stroke-width: 2.0;" width="2041" x="681" y="358.3594"/><rect fill="#FFFFFF" height="540.8672" style="stroke: none; stroke-width: 1.0;" width="2041" x="681" y="404.625"/><rect fill="#FFFFFF" filter="url(#f155xusad7zo6a)" height="439.7969" style="stroke: #000000; stroke-width: 2.0;" width="2021" x="691" y="498.6953"/><rect fill="#FFFFFF" height="73.0703" style="stroke: none; stroke-width: 1.0;" width="2021" x="691" y="865.4219"/><rect fill="#FFFFFF" filter="url(#f155xusad7zo6a)" height="148.4688" style="stroke: #000000; stroke-width: 2.0;" width="838" x="13" y="959.4922"/><rect fill="#FFFFFF" height="73.0703" style="stroke: none; stroke-width: 1.0;" width="838" x="13" y="1034.8906"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="48" x2="48" y1="38.2969" y2="1124.9609"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="406.5" x2="406.5" y1="38.2969" y2="1124.9609"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="771" x2="771" y1="38.2969" y2="1124.9609"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1020" x2="1020" y1="38.2969" y2="1124.9609"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1308.5" x2="1308.5" y1="38.2969" y2="1124.9609"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1542.5" x2="1542.5" y1="38.2969" y2="1124.9609"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1741" x2="1741" y1="38.2969" y2="1124.9609"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1955" x2="1955" y1="38.2969" y2="1124.9609"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="2077" x2="2077" y1="38.2969" y2="1124.9609"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="2187" x2="2187" y1="38.2969" y2="1124.9609"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="2319" x2="2319" y1="38.2969" y2="1124.9609"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="2485" x2="2485" y1="38.2969" y2="1124.9609"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="2637" x2="2637" y1="38.2969" y2="1124.9609"/><rect fill="#FEFECE" filter="url(#f155xusad7zo6a)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="46" x="23" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="30" y="22.9951">User</text><rect fill="#FEFECE" filter="url(#f155xusad7zo6a)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="46" x="23" y="1123.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="30" y="1143.9561">User</text><rect fill="#FEFECE" filter="url(#f155xusad7zo6a)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="139" x="335.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="125" x="342.5" y="22.9951">IBuildingController</text><rect fill="#FEFECE" filter="url(#f155xusad7zo6a)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="139" x="335.5" y="1123.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="125" x="342.5" y="1143.9561">IBuildingController</text><rect fill="#FEFECE" filter="url(#f155xusad7zo6a)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="136" x="701" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="122" x="708" y="22.9951">BuildingController</text><rect fill="#FEFECE" filter="url(#f155xusad7zo6a)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="136" x="701" y="1123.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="122" x="708" y="1143.9561">BuildingController</text><rect fill="#FEFECE" filter="url(#f155xusad7zo6a)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="130" x="953" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="116" x="960" y="22.9951">IBuildingsService</text><rect fill="#FEFECE" filter="url(#f155xusad7zo6a)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="130" x="953" y="1123.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="116" x="960" y="1143.9561">IBuildingsService</text><rect fill="#FEFECE" filter="url(#f155xusad7zo6a)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="127" x="1243.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="113" x="1250.5" y="22.9951">BuildingsService</text><rect fill="#FEFECE" filter="url(#f155xusad7zo6a)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="127" x="1243.5" y="1123.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="113" x="1250.5" y="1143.9561">BuildingsService</text><rect fill="#FEFECE" filter="url(#f155xusad7zo6a)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="117" x="1482.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="103" x="1489.5" y="22.9951">IBuildingsRepo</text><rect fill="#FEFECE" filter="url(#f155xusad7zo6a)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="117" x="1482.5" y="1123.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="103" x="1489.5" y="1143.9561">IBuildingsRepo</text><rect fill="#FEFECE" filter="url(#f155xusad7zo6a)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="114" x="1682" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="100" x="1689" y="22.9951">BuildingsRepo</text><rect fill="#FEFECE" filter="url(#f155xusad7zo6a)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="114" x="1682" y="1123.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="100" x="1689" y="1143.9561">BuildingsRepo</text><rect fill="#FEFECE" filter="url(#f155xusad7zo6a)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="106" x="1900" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="92" x="1907" y="22.9951">BuildingsMap</text><rect fill="#FEFECE" filter="url(#f155xusad7zo6a)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="106" x="1900" y="1123.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="92" x="1907" y="1143.9561">BuildingsMap</text><rect fill="#FEFECE" filter="url(#f155xusad7zo6a)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="111" x="2020" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="97" x="2027" y="22.9951">Building Entity</text><rect fill="#FEFECE" filter="url(#f155xusad7zo6a)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="111" x="2020" y="1123.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="97" x="2027" y="1143.9561">Building Entity</text><rect fill="#FEFECE" filter="url(#f155xusad7zo6a)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="81" x="2145" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="67" x="2152" y="22.9951">ConfigFile</text><rect fill="#FEFECE" filter="url(#f155xusad7zo6a)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="81" x="2145" y="1123.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="67" x="2152" y="1143.9561">ConfigFile</text><rect fill="#FEFECE" filter="url(#f155xusad7zo6a)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="154" x="2240" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="140" x="2247" y="22.9951">IBuildingPersistence</text><rect fill="#FEFECE" filter="url(#f155xusad7zo6a)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="154" x="2240" y="1123.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="140" x="2247" y="1143.9561">IBuildingPersistence</text><rect fill="#FEFECE" filter="url(#f155xusad7zo6a)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="151" x="2408" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="137" x="2415" y="22.9951">BuildingPersistence</text><rect fill="#FEFECE" filter="url(#f155xusad7zo6a)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="151" x="2408" y="1123.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="137" x="2415" y="1143.9561">BuildingPersistence</text><rect fill="#FEFECE" filter="url(#f155xusad7zo6a)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="125" x="2573" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="111" x="2580" y="22.9951">BuildingSchema</text><rect fill="#FEFECE" filter="url(#f155xusad7zo6a)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="125" x="2573" y="1123.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="111" x="2580" y="1143.9561">BuildingSchema</text><rect fill="#FFFFFF" filter="url(#f155xusad7zo6a)" height="1046.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="402" y="69.4297"/><rect fill="#FFFFFF" filter="url(#f155xusad7zo6a)" height="1016.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="766" y="98.5625"/><rect fill="#FFFFFF" filter="url(#f155xusad7zo6a)" height="945.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1015" y="170.8281"/><rect fill="#FFFFFF" filter="url(#f155xusad7zo6a)" height="915" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1304" y="199.9609"/><rect fill="#FFFFFF" filter="url(#f155xusad7zo6a)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1538" y="229.0938"/><rect fill="#FFFFFF" filter="url(#f155xusad7zo6a)" height="203.9297" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1538" y="536.9609"/><rect fill="#FFFFFF" filter="url(#f155xusad7zo6a)" height="85.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1736" y="258.2266"/><rect fill="#FFFFFF" filter="url(#f155xusad7zo6a)" height="145.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1736" y="566.0938"/><rect fill="#FFFFFF" filter="url(#f155xusad7zo6a)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1950" y="595.2266"/><rect fill="#FFFFFF" filter="url(#f155xusad7zo6a)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1950" y="770.0234"/><rect fill="#FFFFFF" filter="url(#f155xusad7zo6a)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2072.5" y="454.5625"/><rect fill="#FFFFFF" filter="url(#f155xusad7zo6a)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2182.5" y="127.6953"/><rect fill="#FFFFFF" filter="url(#f155xusad7zo6a)" height="42" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2314" y="272.2266"/><rect fill="#FFFFFF" filter="url(#f155xusad7zo6a)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2480.5" y="286.2266"/><rect fill="#FFFFFF" filter="url(#f155xusad7zo6a)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2632.5" y="653.4922"/><polygon fill="#A80036" points="390,65.4297,400,69.4297,390,73.4297,394,69.4297" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="48" x2="396" y1="69.4297" y2="69.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="291" x="55" y="64.3638">send request to createBuilding(req, res, next)</text><polygon fill="#A80036" points="754,94.5625,764,98.5625,754,102.5625,758,98.5625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="412" x2="760" y1="98.5625" y2="98.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="186" x="419" y="93.4966">createBuilding(req, res, next)</text><polygon fill="#A80036" points="2170.5,123.6953,2180.5,127.6953,2170.5,131.6953,2174.5,127.6953" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="776" x2="2176.5" y1="127.6953" y2="127.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="783" y="122.6294">Injects Service</text><polygon fill="#A80036" points="787,137.6953,777,141.6953,787,145.6953,783,141.6953" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="781" x2="2186.5" y1="141.6953" y2="141.6953"/><polygon fill="#A80036" points="1003,166.8281,1013,170.8281,1003,174.8281,1007,170.8281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="776" x2="1009" y1="170.8281" y2="170.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="186" x="783" y="165.7622">createBuilding(req, res, next)</text><polygon fill="#A80036" points="1292,195.9609,1302,199.9609,1292,203.9609,1296,199.9609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1025" x2="1298" y1="199.9609" y2="199.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="260" x="1032" y="194.895">createBuilding(req.body as IBuildingDTO)</text><polygon fill="#A80036" points="1526,225.0938,1536,229.0938,1526,233.0938,1530,229.0938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1314" x2="1532" y1="229.0938" y2="229.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="205" x="1321" y="224.0278">findByName(buildingDTO.name)</text><polygon fill="#A80036" points="1724,254.2266,1734,258.2266,1724,262.2266,1728,258.2266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1543" x2="1730" y1="258.2266" y2="258.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="169" x="1550" y="253.1606">buildingDocument (or null)</text><polygon fill="#A80036" points="2302,268.2266,2312,272.2266,2302,276.2266,2306,272.2266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1746" x2="2308" y1="272.2266" y2="272.2266"/><polygon fill="#A80036" points="2468.5,282.2266,2478.5,286.2266,2468.5,290.2266,2472.5,286.2266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="2324" x2="2474.5" y1="286.2266" y2="286.2266"/><polygon fill="#A80036" points="2335,296.2266,2325,300.2266,2335,304.2266,2331,300.2266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="2329" x2="2484.5" y1="300.2266" y2="300.2266"/><polygon fill="#A80036" points="1757,310.2266,1747,314.2266,1757,318.2266,1753,314.2266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1751" x2="2318" y1="314.2266" y2="314.2266"/><polygon fill="#A80036" points="1325,339.3594,1315,343.3594,1325,347.3594,1321,343.3594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1319" x2="1740" y1="343.3594" y2="343.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="169" x="1331" y="338.2935">buildingDocument (or null)</text><path d="M681,358.3594 L745,358.3594 L745,365.3594 L735,375.3594 L681,375.3594 L681,358.3594 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="587.1328" style="stroke: #000000; stroke-width: 2.0;" width="2041" x="681" y="358.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="696" y="371.4263">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="237" x="760" y="370.5698">[building with the same name found]</text><polygon fill="#A80036" points="787,392.625,777,396.625,787,400.625,783,396.625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="781" x2="1303" y1="396.625" y2="396.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="793" y="391.5591">Return failure Result</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="681" x2="2722" y1="405.625" y2="405.625"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="119" x="686" y="415.8354">[building creation]</text><polygon fill="#A80036" points="1943,436.5625,1953,440.5625,1943,444.5625,1947,440.5625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1314" x2="1949" y1="440.5625" y2="440.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="234" x="1321" y="435.4966">ToDomain(req.body as IBuildingDTO)</text><polygon fill="#A80036" points="2060.5,450.5625,2070.5,454.5625,2060.5,458.5625,2064.5,454.5625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1955" x2="2066.5" y1="454.5625" y2="454.5625"/><polygon fill="#A80036" points="1325,479.6953,1315,483.6953,1325,487.6953,1321,483.6953" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1319" x2="2076.5" y1="483.6953" y2="483.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="95" x="1331" y="478.6294">buildingOrError</text><path d="M691,498.6953 L755,498.6953 L755,505.6953 L745,515.6953 L691,515.6953 L691,498.6953 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="439.7969" style="stroke: #000000; stroke-width: 2.0;" width="2021" x="691" y="498.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="706" y="511.7622">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="191" x="770" y="510.9058">[building creation successful]</text><polygon fill="#A80036" points="1526,532.9609,1536,536.9609,1526,540.9609,1530,536.9609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1314" x2="1532" y1="536.9609" y2="536.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="1321" y="531.895">save(buildingResult)</text><polygon fill="#A80036" points="1724,562.0938,1734,566.0938,1724,570.0938,1728,566.0938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1548" x2="1730" y1="566.0938" y2="566.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="1555" y="561.0278">save(buildingResult)</text><polygon fill="#A80036" points="1938,591.2266,1948,595.2266,1938,599.2266,1942,595.2266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1746" x2="1944" y1="595.2266" y2="595.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="185" x="1753" y="590.1606">toPersistence(buildingResult)</text><polygon fill="#A80036" points="1757,620.3594,1747,624.3594,1757,628.3594,1753,624.3594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1751" x2="1954" y1="624.3594" y2="624.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="1763" y="619.2935">return rawBuilding</text><polygon fill="#A80036" points="2620.5,649.4922,2630.5,653.4922,2620.5,657.4922,2624.5,653.4922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1746" x2="2626.5" y1="653.4922" y2="653.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="123" x="1753" y="648.4263">create(rawBuilding)</text><polygon fill="#A80036" points="1757,678.625,1747,682.625,1757,686.625,1753,682.625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1751" x2="2636.5" y1="682.625" y2="682.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="159" x="1763" y="677.5591">return buildingDocument</text><polygon fill="#A80036" points="1559,707.7578,1549,711.7578,1559,715.7578,1555,711.7578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1553" x2="1740" y1="711.7578" y2="711.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="1565" y="706.6919">saved buildingDocument</text><polygon fill="#A80036" points="1325,736.8906,1315,740.8906,1325,744.8906,1321,740.8906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1319" x2="1542" y1="740.8906" y2="740.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="1331" y="735.8247">saved buildingDocument</text><polygon fill="#A80036" points="1938,766.0234,1948,770.0234,1938,774.0234,1942,770.0234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1314" x2="1944" y1="770.0234" y2="770.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="138" x="1321" y="764.9575">toDTO(buildingResult)</text><polygon fill="#A80036" points="1325,795.1563,1315,799.1563,1325,803.1563,1321,799.1563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1319" x2="1954" y1="799.1563" y2="799.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="1331" y="794.0903">buildingDTOResult</text><polygon fill="#A80036" points="1036,824.2891,1026,828.2891,1036,832.2891,1032,828.2891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1030" x2="1303" y1="828.2891" y2="828.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="1042" y="823.2231">buildingDTOResult</text><polygon fill="#A80036" points="787,853.4219,777,857.4219,787,861.4219,783,857.4219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="781" x2="1014" y1="857.4219" y2="857.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="215" x="793" y="852.356">Return successful Result with DTO</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="691" x2="2712" y1="866.4219" y2="866.4219"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="160" x="696" y="876.6323">[building creation failed]</text><polygon fill="#A80036" points="1036,897.3594,1026,901.3594,1036,905.3594,1032,901.3594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1030" x2="1303" y1="901.3594" y2="901.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="74" x="1042" y="896.2935">Error Result</text><polygon fill="#A80036" points="787,926.4922,777,930.4922,787,934.4922,783,930.4922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="781" x2="1014" y1="930.4922" y2="930.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="74" x="793" y="925.4263">Error Result</text><path d="M13,959.4922 L77,959.4922 L77,966.4922 L67,976.4922 L13,976.4922 L13,959.4922 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="148.4688" style="stroke: #000000; stroke-width: 2.0;" width="838" x="13" y="959.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="28" y="972.5591">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="269" x="92" y="971.7026">[BuildingsService returns a failure Result]</text><polygon fill="#A80036" points="423,993.7578,413,997.7578,423,1001.7578,419,997.7578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="417" x2="765" y1="997.7578" y2="997.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="197" x="429" y="992.6919">Send response with status 402</text><polygon fill="#A80036" points="59,1022.8906,49,1026.8906,59,1030.8906,55,1026.8906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="53" x2="401" y1="1026.8906" y2="1026.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="197" x="65" y="1021.8247">Send response with status 402</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="13" x2="851" y1="1035.8906" y2="1035.8906"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="295" x="18" y="1046.1011">[BuildingsService returns a successful Result]</text><polygon fill="#A80036" points="423,1066.8281,413,1070.8281,423,1074.8281,419,1070.8281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="417" x2="765" y1="1070.8281" y2="1070.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="330" x="429" y="1065.7622">Send response with status 201 and the buildingDTO</text><polygon fill="#A80036" points="59,1095.9609,49,1099.9609,59,1103.9609,55,1099.9609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="53" x2="401" y1="1099.9609" y2="1099.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="330" x="65" y="1094.895">Send response with status 201 and the buildingDTO</text><!--MD5=[1278085630b2bcdd2e4593a3dbee8dc6]
@startuml sd

participant "User" as A
participant "IBuildingController" as IB
participant "BuildingController" as B
participant "IBuildingsService" as IC
participant "BuildingsService" as C
participant "IBuildingsRepo" as ID
participant "BuildingsRepo" as D
participant "BuildingsMap" as F
participant "Building Entity" as E
participant "ConfigFile" as CONF
participant "IBuildingPersistence" as IH
participant "BuildingPersistence" as H
participant "BuildingSchema" as I

A -> IB: send request to createBuilding(req, res, next)
activate IB
IB -> B:createBuilding(req, res, next)
activate B
B -> CONF : Injects Service
activate CONF

CONF -> B
deactivate CONF

B -> IC: createBuilding(req, res, next)
activate IC

IC -> C: createBuilding(req.body as IBuildingDTO)
activate C

C -> ID: findByName(buildingDTO.name)
activate ID

ID -> D: buildingDocument (or null)
deactivate ID
activate D
D - -> IH: 
activate IH
IH - -> H: 
activate H
H - -> IH: 
deactivate H
IH - -> D
deactivate IH
D - -> C: buildingDocument (or null)
deactivate D

alt building with the same name found
    C - -> B: Return failure Result
else building creation
    C -> F: ToDomain(req.body as IBuildingDTO)
    F -> E:
    activate E
    E - -> C: buildingOrError
    deactivate E
    
    alt building creation successful
        C -> ID: save(buildingResult)
        activate ID
        ID -> D: save(buildingResult)
        activate D
        D -> F: toPersistence(buildingResult)
        activate F 
        F - -> D : return rawBuilding
        deactivate F
        D - -> I: create(rawBuilding)
        activate I
        I - -> D : return buildingDocument
        deactivate I
        D - -> ID: saved buildingDocument
        deactivate D
        ID - -> C: saved buildingDocument
        deactivate ID
        
        C -> F: toDTO(buildingResult)
        activate F
        F - -> C: buildingDTOResult
        deactivate F
        C - -> IC : buildingDTOResult
        IC - -> B: Return successful Result with DTO
    else building creation failed
        C - -> IC: Error Result
        IC - -> B: Error Result
    end
end

alt BuildingsService returns a failure Result
    B -> IB: Send response with status 402
    IB -> A: Send response with status 402
else BuildingsService returns a successful Result
    B -> IB: Send response with status 201 and the buildingDTO
    IB -> A: Send response with status 201 and the buildingDTO

end

deactivate C
deactivate B

@enduml

PlantUML version 1.2020.02(Sun Mar 01 10:22:07 UTC 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.21+9
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>