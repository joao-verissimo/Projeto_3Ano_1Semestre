<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="757px" preserveAspectRatio="none" style="width:2858px;height:757px;background:#FFFFFF;" version="1.1" viewBox="0 0 2858 757" width="2858px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="632.6797" style="stroke:#181818;stroke-width:1.0;" width="10" x="422.5" y="69.9609"/><rect fill="#FFFFFF" height="571.9766" style="stroke:#181818;stroke-width:1.0;" width="10" x="828.5" y="100.3125"/><rect fill="#FFFFFF" height="466.9219" style="stroke:#181818;stroke-width:1.0;" width="10" x="1187.5" y="175.0156"/><rect fill="#FFFFFF" height="406.2188" style="stroke:#181818;stroke-width:1.0;" width="10" x="1400.5" y="205.3672"/><rect fill="#FFFFFF" height="224.1094" style="stroke:#181818;stroke-width:1.0;" width="10" x="1585.5" y="235.7188"/><rect fill="#FFFFFF" height="163.4063" style="stroke:#181818;stroke-width:1.0;" width="10" x="1770.5" y="266.0703"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="2081.5" y="490.1797"/><rect fill="#FFFFFF" height="42" style="stroke:#181818;stroke-width:1.0;" width="10" x="2331.5" y="296.4219"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="2481" y="310.4219"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="2617.5" y="368.7734"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="2722" y="550.8828"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="2808" y="130.6641"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="26" x2="26" y1="37.6094" y2="720.6406"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="427" x2="427" y1="37.6094" y2="720.6406"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="833.5" x2="833.5" y1="37.6094" y2="720.6406"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1192" x2="1192" y1="37.6094" y2="720.6406"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1405.5" x2="1405.5" y1="37.6094" y2="720.6406"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1590.5" x2="1590.5" y1="37.6094" y2="720.6406"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1775" x2="1775" y1="37.6094" y2="720.6406"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2086" x2="2086" y1="37.6094" y2="720.6406"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2336" x2="2336" y1="37.6094" y2="720.6406"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2486" x2="2486" y1="37.6094" y2="720.6406"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2622" x2="2622" y1="37.6094" y2="720.6406"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2727" x2="2727" y1="37.6094" y2="720.6406"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2813" x2="2813" y1="37.6094" y2="720.6406"/><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="43" x="5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29" x="12" y="26.5332">User</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="43" x="5" y="719.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29" x="12" y="741.1738">User</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="129" x="363" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="115" x="370" y="26.5332">IBuildingController</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="129" x="363" y="719.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="115" x="370" y="741.1738">IBuildingController</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="126" x="770.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112" x="777.5" y="26.5332">BuildingController</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="126" x="770.5" y="719.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112" x="777.5" y="741.1738">BuildingController</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="121" x="1132" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107" x="1139" y="26.5332">IBuildingsService</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="121" x="1132" y="719.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107" x="1139" y="741.1738">IBuildingsService</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="118" x="1346.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="104" x="1353.5" y="26.5332">BuildingsService</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="118" x="1346.5" y="719.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="104" x="1353.5" y="741.1738">BuildingsService</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="108" x="1536.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94" x="1543.5" y="26.5332">IBuildingsRepo</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="108" x="1536.5" y="719.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94" x="1543.5" y="741.1738">IBuildingsRepo</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="105" x="1723" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91" x="1730" y="26.5332">BuildingsRepo</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="105" x="1723" y="719.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91" x="1730" y="741.1738">BuildingsRepo</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="103" x="2035" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89" x="2042" y="26.5332">Building Entity</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="103" x="2035" y="719.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89" x="2042" y="741.1738">Building Entity</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="141" x="2266" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127" x="2273" y="26.5332">IBuildingPersistence</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="141" x="2266" y="719.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127" x="2273" y="741.1738">IBuildingPersistence</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="138" x="2417" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="124" x="2424" y="26.5332">BuildingPersistence</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="138" x="2417" y="719.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="124" x="2424" y="741.1738">BuildingPersistence</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="115" x="2565" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101" x="2572" y="26.5332">BuildingSchema</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="115" x="2565" y="719.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101" x="2572" y="741.1738">BuildingSchema</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="74" x="2690" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="60" x="2697" y="26.5332">FloorMap</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="74" x="2690" y="719.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="60" x="2697" y="741.1738">FloorMap</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="78" x="2774" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64" x="2781" y="26.5332">ConfigFile</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="78" x="2774" y="719.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64" x="2781" y="741.1738">ConfigFile</text><rect fill="#FFFFFF" height="632.6797" style="stroke:#181818;stroke-width:1.0;" width="10" x="422.5" y="69.9609"/><rect fill="#FFFFFF" height="571.9766" style="stroke:#181818;stroke-width:1.0;" width="10" x="828.5" y="100.3125"/><rect fill="#FFFFFF" height="466.9219" style="stroke:#181818;stroke-width:1.0;" width="10" x="1187.5" y="175.0156"/><rect fill="#FFFFFF" height="406.2188" style="stroke:#181818;stroke-width:1.0;" width="10" x="1400.5" y="205.3672"/><rect fill="#FFFFFF" height="224.1094" style="stroke:#181818;stroke-width:1.0;" width="10" x="1585.5" y="235.7188"/><rect fill="#FFFFFF" height="163.4063" style="stroke:#181818;stroke-width:1.0;" width="10" x="1770.5" y="266.0703"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="2081.5" y="490.1797"/><rect fill="#FFFFFF" height="42" style="stroke:#181818;stroke-width:1.0;" width="10" x="2331.5" y="296.4219"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="2481" y="310.4219"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="2617.5" y="368.7734"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="2722" y="550.8828"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="2808" y="130.6641"/><polygon fill="#181818" points="410.5,65.9609,420.5,69.9609,410.5,73.9609,414.5,69.9609" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="26.5" x2="416.5" y1="69.9609" y2="69.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="330" x="33.5" y="65.1045">ListBuildingFloorWithPassageToOtherBuilding(buildingID)</text><polygon fill="#181818" points="816.5,96.3125,826.5,100.3125,816.5,104.3125,820.5,100.3125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="432.5" x2="822.5" y1="100.3125" y2="100.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="330" x="439.5" y="95.4561">ListBuildingFloorWithPassageToOtherBuilding(buildingID)</text><polygon fill="#181818" points="2796,126.6641,2806,130.6641,2796,134.6641,2800,130.6641" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="838.5" x2="2802" y1="130.6641" y2="130.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84" x="845.5" y="125.8076">Injects Service</text><polygon fill="#181818" points="849.5,140.6641,839.5,144.6641,849.5,148.6641,845.5,144.6641" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="843.5" x2="2812" y1="144.6641" y2="144.6641"/><polygon fill="#181818" points="1175.5,171.0156,1185.5,175.0156,1175.5,179.0156,1179.5,175.0156" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="838.5" x2="1181.5" y1="175.0156" y2="175.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="330" x="845.5" y="170.1592">ListBuildingFloorWithPassageToOtherBuilding(buildingID)</text><polygon fill="#181818" points="1388.5,201.3672,1398.5,205.3672,1388.5,209.3672,1392.5,205.3672" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1197.5" x2="1394.5" y1="205.3672" y2="205.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="1204.5" y="200.5107">findByDomainID(buildingID)</text><polygon fill="#181818" points="1573.5,231.7188,1583.5,235.7188,1573.5,239.7188,1577.5,235.7188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1410.5" x2="1579.5" y1="235.7188" y2="235.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="1417.5" y="230.8623">findByDomainID(buildingID)</text><polygon fill="#181818" points="1758.5,262.0703,1768.5,266.0703,1758.5,270.0703,1762.5,266.0703" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1595.5" x2="1764.5" y1="266.0703" y2="266.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="1602.5" y="261.2139">findByDomainID(buildingID)</text><polygon fill="#181818" points="2319.5,292.4219,2329.5,296.4219,2319.5,300.4219,2323.5,296.4219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1780.5" x2="2325.5" y1="296.4219" y2="296.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="335" x="1787.5" y="291.5654">query as FilterQuery&lt;IBuildingsPersistence &amp; Document&gt;</text><polygon fill="#181818" points="2469,306.4219,2479,310.4219,2469,314.4219,2473,310.4219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2341.5" x2="2475" y1="310.4219" y2="310.4219"/><polygon fill="#181818" points="2352.5,320.4219,2342.5,324.4219,2352.5,328.4219,2348.5,324.4219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2346.5" x2="2485" y1="324.4219" y2="324.4219"/><polygon fill="#181818" points="1791.5,334.4219,1781.5,338.4219,1791.5,342.4219,1787.5,338.4219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1785.5" x2="2335.5" y1="338.4219" y2="338.4219"/><polygon fill="#181818" points="2605.5,364.7734,2615.5,368.7734,2605.5,372.7734,2609.5,368.7734" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1780.5" x2="2611.5" y1="368.7734" y2="368.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84" x="1787.5" y="363.917">findOne(query)</text><polygon fill="#181818" points="1791.5,395.125,1781.5,399.125,1791.5,403.125,1787.5,399.125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1785.5" x2="2621.5" y1="399.125" y2="399.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="1797.5" y="394.2686">return building entity</text><polygon fill="#181818" points="1606.5,425.4766,1596.5,429.4766,1606.5,433.4766,1602.5,429.4766" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1600.5" x2="1774.5" y1="429.4766" y2="429.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="1612.5" y="424.6201">return building entity</text><polygon fill="#181818" points="1421.5,455.8281,1411.5,459.8281,1421.5,463.8281,1417.5,459.8281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1415.5" x2="1589.5" y1="459.8281" y2="459.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="80" x="1427.5" y="454.9717">building entity</text><polygon fill="#181818" points="2069.5,486.1797,2079.5,490.1797,2069.5,494.1797,2073.5,490.1797" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1410.5" x2="2075.5" y1="490.1797" y2="490.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="652" x="1417.5" y="485.3232">floorsWithPassages: Floor[] = building.floorOnBuilding.filter(floor =&gt; floor.passages &amp;&amp; floor.passages.length &gt; 0)</text><polygon fill="#181818" points="1421.5,516.5313,1411.5,520.5313,1421.5,524.5313,1417.5,520.5313" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1415.5" x2="2085.5" y1="520.5313" y2="520.5313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="160" x="1427.5" y="515.6748">returns floorsWithPassages</text><polygon fill="#181818" points="2710,546.8828,2720,550.8828,2710,554.8828,2714,550.8828" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1410.5" x2="2716" y1="550.8828" y2="550.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="486" x="1417.5" y="546.0264">floorsWithPassagesDTO = floorsWithPassages.map(floor =&gt; FloorMap.toDTO(floor))</text><polygon fill="#181818" points="1421.5,577.2344,1411.5,581.2344,1421.5,585.2344,1417.5,581.2344" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1415.5" x2="2726" y1="581.2344" y2="581.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="186" x="1427.5" y="576.3779">returns floorsWithPassagesDTO</text><polygon fill="#181818" points="1208.5,607.5859,1198.5,611.5859,1208.5,615.5859,1204.5,611.5859" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1202.5" x2="1404.5" y1="611.5859" y2="611.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="179" x="1214.5" y="606.7295">return floorsWithPassagesDTO</text><polygon fill="#181818" points="849.5,637.9375,839.5,641.9375,849.5,645.9375,845.5,641.9375" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="843.5" x2="1191.5" y1="641.9375" y2="641.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="184" x="855.5" y="637.0811">Return floorsWithPassagesDTO</text><polygon fill="#181818" points="443.5,668.2891,433.5,672.2891,443.5,676.2891,439.5,672.2891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="437.5" x2="832.5" y1="672.2891" y2="672.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="372" x="449.5" y="667.4326">Send response with status 200 and the floorsWithPassagesDTO</text><polygon fill="#181818" points="37.5,698.6406,27.5,702.6406,37.5,706.6406,33.5,702.6406" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="31.5" x2="426.5" y1="702.6406" y2="702.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="372" x="43.5" y="697.7842">Send response with status 200 and the floorsWithPassagesDTO</text><!--MD5=[76caf014c6e12d9c2e99c250b8d6bc6b]
@startuml US220_LEVEL3

participant "User" as A
participant "IBuildingController" as IB
participant "BuildingController" as B
participant "IBuildingsService" as IC
participant "BuildingsService" as C
participant "IBuildingsRepo" as ID
participant "BuildingsRepo" as D
participant "Building Entity" as E
participant "ConfigFile" as CONF
participant "IBuildingPersistence" as IH
participant "BuildingPersistence" as H
participant "BuildingSchema" as I
participant "FloorMap" as FM
participant "ConfigFile" as CONF


A -> IB: ListBuildingFloorWithPassageToOtherBuilding(buildingID)
activate IB

IB -> B: ListBuildingFloorWithPassageToOtherBuilding(buildingID)
activate B
B -> CONF: Injects Service
activate CONF
CONF -> B
deactivate CONF
B -> IC: ListBuildingFloorWithPassageToOtherBuilding(buildingID)
activate IC

IC -> C: findByDomainID(buildingID)
activate C

C -> ID: findByDomainID(buildingID)
activate ID

ID -> D: findByDomainID(buildingID)
activate D

D -> IH: query as FilterQuery<IBuildingsPersistence & Document>
activate IH

IH -> H: 
activate H

H -> IH:
deactivate H

IH -> D:
deactivate IH

D -> I: findOne(query)
activate I

I - -> D: return building entity
deactivate I

D - -> ID: return building entity
deactivate D

ID - -> C: building entity
deactivate ID

C - -> E: floorsWithPassages: Floor[] = building.floorOnBuilding.filter(floor => floor.passages && floor.passages.length > 0)
activate E

E - -> C: returns floorsWithPassages
deactivate E

C - -> FM: floorsWithPassagesDTO = floorsWithPassages.map(floor => FloorMap.toDTO(floor))
activate FM

FM - -> C: returns floorsWithPassagesDTO
deactivate FM

C - -> IC: return floorsWithPassagesDTO
deactivate C

IC - -> B: Return floorsWithPassagesDTO
deactivate IC

B -> IB: Send response with status 200 and the floorsWithPassagesDTO
deactivate B

IB -> A: Send response with status 200 and the floorsWithPassagesDTO
deactivate IB

@enduml

PlantUML version 1.2022.7(Mon Aug 22 18:01:30 WEST 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: Cp1252
Language: pt
Country: PT
--></g></svg>