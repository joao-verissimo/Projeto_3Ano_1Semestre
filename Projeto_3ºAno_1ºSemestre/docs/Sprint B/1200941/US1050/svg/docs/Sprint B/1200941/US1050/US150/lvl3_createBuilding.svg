<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1456px" preserveAspectRatio="none" style="width:3558px;height:1456px;" version="1.1" viewBox="0 0 3558 1456" width="3558px" zoomAndPan="magnify"><defs><filter height="300%" id="fzk6vkvgwx8ul" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#fzk6vkvgwx8ul)" height="1163.0625" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1226" y="244.2266"/><rect fill="#FFFFFF" filter="url(#fzk6vkvgwx8ul)" height="1133.9297" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1590" y="273.3594"/><rect fill="#FFFFFF" filter="url(#fzk6vkvgwx8ul)" height="1061.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1839" y="345.625"/><rect fill="#FFFFFF" filter="url(#fzk6vkvgwx8ul)" height="1032.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2128" y="374.7578"/><rect fill="#FFFFFF" filter="url(#fzk6vkvgwx8ul)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2362" y="403.8906"/><rect fill="#FFFFFF" filter="url(#fzk6vkvgwx8ul)" height="203.9297" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2362" y="711.7578"/><rect fill="#FFFFFF" filter="url(#fzk6vkvgwx8ul)" height="85.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2560" y="433.0234"/><rect fill="#FFFFFF" filter="url(#fzk6vkvgwx8ul)" height="145.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2560" y="740.8906"/><rect fill="#FFFFFF" filter="url(#fzk6vkvgwx8ul)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2774" y="770.0234"/><rect fill="#FFFFFF" filter="url(#fzk6vkvgwx8ul)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2774" y="944.8203"/><rect fill="#FFFFFF" filter="url(#fzk6vkvgwx8ul)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2896.5" y="629.3594"/><rect fill="#FFFFFF" filter="url(#fzk6vkvgwx8ul)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="3006.5" y="302.4922"/><rect fill="#FFFFFF" filter="url(#fzk6vkvgwx8ul)" height="42" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="3138" y="447.0234"/><rect fill="#FFFFFF" filter="url(#fzk6vkvgwx8ul)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="3304.5" y="461.0234"/><rect fill="#FFFFFF" filter="url(#fzk6vkvgwx8ul)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="3456.5" y="828.2891"/><rect fill="#FFFFFF" filter="url(#fzk6vkvgwx8ul)" height="587.1328" style="stroke: #000000; stroke-width: 2.0;" width="2041" x="1505" y="533.1563"/><rect fill="#FFFFFF" height="540.8672" style="stroke: none; stroke-width: 1.0;" width="2041" x="1505" y="579.4219"/><rect fill="#FFFFFF" filter="url(#fzk6vkvgwx8ul)" height="439.7969" style="stroke: #000000; stroke-width: 2.0;" width="2021" x="1515" y="673.4922"/><rect fill="#FFFFFF" height="73.0703" style="stroke: none; stroke-width: 1.0;" width="2021" x="1515" y="1040.2188"/><rect fill="#FFFFFF" filter="url(#fzk6vkvgwx8ul)" height="148.4688" style="stroke: #000000; stroke-width: 2.0;" width="851.5" x="823.5" y="1134.2891"/><rect fill="#FFFFFF" height="73.0703" style="stroke: none; stroke-width: 1.0;" width="851.5" x="823.5" y="1209.6875"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="33" x2="33" y1="38.2969" y2="1416.2891"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="232.5" x2="232.5" y1="38.2969" y2="1416.2891"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="445.5" x2="445.5" y1="38.2969" y2="1416.2891"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="680.5" x2="680.5" y1="38.2969" y2="1416.2891"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="871.5" x2="871.5" y1="38.2969" y2="1416.2891"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1230.5" x2="1230.5" y1="38.2969" y2="1416.2891"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1595" x2="1595" y1="38.2969" y2="1416.2891"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1844" x2="1844" y1="38.2969" y2="1416.2891"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="2132.5" x2="2132.5" y1="38.2969" y2="1416.2891"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="2366.5" x2="2366.5" y1="38.2969" y2="1416.2891"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="2565" x2="2565" y1="38.2969" y2="1416.2891"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="2779" x2="2779" y1="38.2969" y2="1416.2891"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="2901" x2="2901" y1="38.2969" y2="1416.2891"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="3011" x2="3011" y1="38.2969" y2="1416.2891"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="3143" x2="3143" y1="38.2969" y2="1416.2891"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="3309" x2="3309" y1="38.2969" y2="1416.2891"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="3461" x2="3461" y1="38.2969" y2="1416.2891"/><rect fill="#FEFECE" filter="url(#fzk6vkvgwx8ul)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="46" x="8" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="15" y="22.9951">User</text><rect fill="#FEFECE" filter="url(#fzk6vkvgwx8ul)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="46" x="8" y="1415.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="15" y="1435.2842">User</text><rect fill="#FEFECE" filter="url(#fzk6vkvgwx8ul)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="51" x="205.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="37" x="212.5" y="22.9951">:View</text><rect fill="#FEFECE" filter="url(#fzk6vkvgwx8ul)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="51" x="205.5" y="1415.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="37" x="212.5" y="1435.2842">:View</text><rect fill="#FEFECE" filter="url(#fzk6vkvgwx8ul)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="125" x="381.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="111" x="388.5" y="22.9951">:FE_Component</text><rect fill="#FEFECE" filter="url(#fzk6vkvgwx8ul)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="125" x="381.5" y="1415.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="111" x="388.5" y="1435.2842">:FE_Component</text><rect fill="#FEFECE" filter="url(#fzk6vkvgwx8ul)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="93" x="632.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="79" x="639.5" y="22.9951">:FE_Service</text><rect fill="#FEFECE" filter="url(#fzk6vkvgwx8ul)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="93" x="632.5" y="1415.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="79" x="639.5" y="1435.2842">:FE_Service</text><rect fill="#FEFECE" filter="url(#fzk6vkvgwx8ul)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="73" x="833.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="59" x="840.5" y="22.9951">:Routing</text><rect fill="#FEFECE" filter="url(#fzk6vkvgwx8ul)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="73" x="833.5" y="1415.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="59" x="840.5" y="1435.2842">:Routing</text><rect fill="#FEFECE" filter="url(#fzk6vkvgwx8ul)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="139" x="1159.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="125" x="1166.5" y="22.9951">IBuildingController</text><rect fill="#FEFECE" filter="url(#fzk6vkvgwx8ul)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="139" x="1159.5" y="1415.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="125" x="1166.5" y="1435.2842">IBuildingController</text><rect fill="#FEFECE" filter="url(#fzk6vkvgwx8ul)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="136" x="1525" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="122" x="1532" y="22.9951">BuildingController</text><rect fill="#FEFECE" filter="url(#fzk6vkvgwx8ul)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="136" x="1525" y="1415.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="122" x="1532" y="1435.2842">BuildingController</text><rect fill="#FEFECE" filter="url(#fzk6vkvgwx8ul)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="130" x="1777" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="116" x="1784" y="22.9951">IBuildingsService</text><rect fill="#FEFECE" filter="url(#fzk6vkvgwx8ul)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="130" x="1777" y="1415.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="116" x="1784" y="1435.2842">IBuildingsService</text><rect fill="#FEFECE" filter="url(#fzk6vkvgwx8ul)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="127" x="2067.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="113" x="2074.5" y="22.9951">BuildingsService</text><rect fill="#FEFECE" filter="url(#fzk6vkvgwx8ul)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="127" x="2067.5" y="1415.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="113" x="2074.5" y="1435.2842">BuildingsService</text><rect fill="#FEFECE" filter="url(#fzk6vkvgwx8ul)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="117" x="2306.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="103" x="2313.5" y="22.9951">IBuildingsRepo</text><rect fill="#FEFECE" filter="url(#fzk6vkvgwx8ul)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="117" x="2306.5" y="1415.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="103" x="2313.5" y="1435.2842">IBuildingsRepo</text><rect fill="#FEFECE" filter="url(#fzk6vkvgwx8ul)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="114" x="2506" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="100" x="2513" y="22.9951">BuildingsRepo</text><rect fill="#FEFECE" filter="url(#fzk6vkvgwx8ul)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="114" x="2506" y="1415.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="100" x="2513" y="1435.2842">BuildingsRepo</text><rect fill="#FEFECE" filter="url(#fzk6vkvgwx8ul)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="106" x="2724" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="92" x="2731" y="22.9951">BuildingsMap</text><rect fill="#FEFECE" filter="url(#fzk6vkvgwx8ul)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="106" x="2724" y="1415.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="92" x="2731" y="1435.2842">BuildingsMap</text><rect fill="#FEFECE" filter="url(#fzk6vkvgwx8ul)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="111" x="2844" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="97" x="2851" y="22.9951">Building Entity</text><rect fill="#FEFECE" filter="url(#fzk6vkvgwx8ul)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="111" x="2844" y="1415.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="97" x="2851" y="1435.2842">Building Entity</text><rect fill="#FEFECE" filter="url(#fzk6vkvgwx8ul)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="81" x="2969" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="67" x="2976" y="22.9951">ConfigFile</text><rect fill="#FEFECE" filter="url(#fzk6vkvgwx8ul)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="81" x="2969" y="1415.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="67" x="2976" y="1435.2842">ConfigFile</text><rect fill="#FEFECE" filter="url(#fzk6vkvgwx8ul)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="154" x="3064" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="140" x="3071" y="22.9951">IBuildingPersistence</text><rect fill="#FEFECE" filter="url(#fzk6vkvgwx8ul)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="154" x="3064" y="1415.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="140" x="3071" y="1435.2842">IBuildingPersistence</text><rect fill="#FEFECE" filter="url(#fzk6vkvgwx8ul)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="151" x="3232" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="137" x="3239" y="22.9951">BuildingPersistence</text><rect fill="#FEFECE" filter="url(#fzk6vkvgwx8ul)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="151" x="3232" y="1415.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="137" x="3239" y="1435.2842">BuildingPersistence</text><rect fill="#FEFECE" filter="url(#fzk6vkvgwx8ul)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="125" x="3397" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="111" x="3404" y="22.9951">BuildingSchema</text><rect fill="#FEFECE" filter="url(#fzk6vkvgwx8ul)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="125" x="3397" y="1415.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="111" x="3404" y="1435.2842">BuildingSchema</text><rect fill="#FFFFFF" filter="url(#fzk6vkvgwx8ul)" height="1163.0625" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1226" y="244.2266"/><rect fill="#FFFFFF" filter="url(#fzk6vkvgwx8ul)" height="1133.9297" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1590" y="273.3594"/><rect fill="#FFFFFF" filter="url(#fzk6vkvgwx8ul)" height="1061.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1839" y="345.625"/><rect fill="#FFFFFF" filter="url(#fzk6vkvgwx8ul)" height="1032.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2128" y="374.7578"/><rect fill="#FFFFFF" filter="url(#fzk6vkvgwx8ul)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2362" y="403.8906"/><rect fill="#FFFFFF" filter="url(#fzk6vkvgwx8ul)" height="203.9297" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2362" y="711.7578"/><rect fill="#FFFFFF" filter="url(#fzk6vkvgwx8ul)" height="85.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2560" y="433.0234"/><rect fill="#FFFFFF" filter="url(#fzk6vkvgwx8ul)" height="145.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2560" y="740.8906"/><rect fill="#FFFFFF" filter="url(#fzk6vkvgwx8ul)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2774" y="770.0234"/><rect fill="#FFFFFF" filter="url(#fzk6vkvgwx8ul)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2774" y="944.8203"/><rect fill="#FFFFFF" filter="url(#fzk6vkvgwx8ul)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2896.5" y="629.3594"/><rect fill="#FFFFFF" filter="url(#fzk6vkvgwx8ul)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="3006.5" y="302.4922"/><rect fill="#FFFFFF" filter="url(#fzk6vkvgwx8ul)" height="42" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="3138" y="447.0234"/><rect fill="#FFFFFF" filter="url(#fzk6vkvgwx8ul)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="3304.5" y="461.0234"/><rect fill="#FFFFFF" filter="url(#fzk6vkvgwx8ul)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="3456.5" y="828.2891"/><polygon fill="#A80036" points="221,65.4297,231,69.4297,221,73.4297,225,69.4297" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="33" x2="227" y1="69.4297" y2="69.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="149" x="40" y="64.3638">Accesses web interface</text><polygon fill="#A80036" points="434,94.5625,444,98.5625,434,102.5625,438,98.5625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="233" x2="440" y1="98.5625" y2="98.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="189" x="240" y="93.4966">Display building creation form</text><polygon fill="#A80036" points="244,123.6953,234,127.6953,244,131.6953,240,127.6953" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="238" x2="445" y1="127.6953" y2="127.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="159" x="250" y="122.6294">User inputs building data</text><polygon fill="#A80036" points="669,152.8281,679,156.8281,669,160.8281,673,156.8281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="233" x2="675" y1="156.8281" y2="156.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="240" y="151.7622">Submit building data</text><polygon fill="#A80036" points="860,181.9609,870,185.9609,860,189.9609,864,185.9609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="681" x2="866" y1="185.9609" y2="185.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="167" x="688" y="180.895">Request to create building</text><polygon fill="#A80036" points="1219,211.0938,1229,215.0938,1219,219.0938,1223,215.0938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="872" x2="1225" y1="215.0938" y2="215.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="202" x="879" y="210.0278">Forward request (req, res, next)</text><polygon fill="#A80036" points="1214,240.2266,1224,244.2266,1214,248.2266,1218,244.2266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="33" x2="1220" y1="244.2266" y2="244.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="291" x="40" y="239.1606">send request to createBuilding(req, res, next)</text><polygon fill="#A80036" points="1578,269.3594,1588,273.3594,1578,277.3594,1582,273.3594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1236" x2="1584" y1="273.3594" y2="273.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="186" x="1243" y="268.2935">createBuilding(req, res, next)</text><polygon fill="#A80036" points="2994.5,298.4922,3004.5,302.4922,2994.5,306.4922,2998.5,302.4922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1600" x2="3000.5" y1="302.4922" y2="302.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="1607" y="297.4263">Injects Service</text><polygon fill="#A80036" points="1611,312.4922,1601,316.4922,1611,320.4922,1607,316.4922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1605" x2="3010.5" y1="316.4922" y2="316.4922"/><polygon fill="#A80036" points="1827,341.625,1837,345.625,1827,349.625,1831,345.625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1600" x2="1833" y1="345.625" y2="345.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="186" x="1607" y="340.5591">createBuilding(req, res, next)</text><polygon fill="#A80036" points="2116,370.7578,2126,374.7578,2116,378.7578,2120,374.7578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1849" x2="2122" y1="374.7578" y2="374.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="260" x="1856" y="369.6919">createBuilding(req.body as IBuildingDTO)</text><polygon fill="#A80036" points="2350,399.8906,2360,403.8906,2350,407.8906,2354,403.8906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2138" x2="2356" y1="403.8906" y2="403.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="205" x="2145" y="398.8247">findByName(buildingDTO.name)</text><polygon fill="#A80036" points="2548,429.0234,2558,433.0234,2548,437.0234,2552,433.0234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2367" x2="2554" y1="433.0234" y2="433.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="169" x="2374" y="427.9575">buildingDocument (or null)</text><polygon fill="#A80036" points="3126,443.0234,3136,447.0234,3126,451.0234,3130,447.0234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="2570" x2="3132" y1="447.0234" y2="447.0234"/><polygon fill="#A80036" points="3292.5,457.0234,3302.5,461.0234,3292.5,465.0234,3296.5,461.0234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="3148" x2="3298.5" y1="461.0234" y2="461.0234"/><polygon fill="#A80036" points="3159,471.0234,3149,475.0234,3159,479.0234,3155,475.0234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="3153" x2="3308.5" y1="475.0234" y2="475.0234"/><polygon fill="#A80036" points="2581,485.0234,2571,489.0234,2581,493.0234,2577,489.0234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="2575" x2="3142" y1="489.0234" y2="489.0234"/><polygon fill="#A80036" points="2149,514.1563,2139,518.1563,2149,522.1563,2145,518.1563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="2143" x2="2564" y1="518.1563" y2="518.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="169" x="2155" y="513.0903">buildingDocument (or null)</text><path d="M1505,533.1563 L1569,533.1563 L1569,540.1563 L1559,550.1563 L1505,550.1563 L1505,533.1563 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="587.1328" style="stroke: #000000; stroke-width: 2.0;" width="2041" x="1505" y="533.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="1520" y="546.2231">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="237" x="1584" y="545.3667">[building with the same name found]</text><polygon fill="#A80036" points="1611,567.4219,1601,571.4219,1611,575.4219,1607,571.4219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1605" x2="2127" y1="571.4219" y2="571.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="1617" y="566.356">Return failure Result</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1505" x2="3546" y1="580.4219" y2="580.4219"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="119" x="1510" y="590.6323">[building creation]</text><polygon fill="#A80036" points="2767,611.3594,2777,615.3594,2767,619.3594,2771,615.3594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2138" x2="2773" y1="615.3594" y2="615.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="234" x="2145" y="610.2935">ToDomain(req.body as IBuildingDTO)</text><polygon fill="#A80036" points="2884.5,625.3594,2894.5,629.3594,2884.5,633.3594,2888.5,629.3594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2779" x2="2890.5" y1="629.3594" y2="629.3594"/><polygon fill="#A80036" points="2149,654.4922,2139,658.4922,2149,662.4922,2145,658.4922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="2143" x2="2900.5" y1="658.4922" y2="658.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="95" x="2155" y="653.4263">buildingOrError</text><path d="M1515,673.4922 L1579,673.4922 L1579,680.4922 L1569,690.4922 L1515,690.4922 L1515,673.4922 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="439.7969" style="stroke: #000000; stroke-width: 2.0;" width="2021" x="1515" y="673.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="1530" y="686.5591">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="191" x="1594" y="685.7026">[building creation successful]</text><polygon fill="#A80036" points="2350,707.7578,2360,711.7578,2350,715.7578,2354,711.7578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2138" x2="2356" y1="711.7578" y2="711.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="2145" y="706.6919">save(buildingResult)</text><polygon fill="#A80036" points="2548,736.8906,2558,740.8906,2548,744.8906,2552,740.8906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2372" x2="2554" y1="740.8906" y2="740.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="2379" y="735.8247">save(buildingResult)</text><polygon fill="#A80036" points="2762,766.0234,2772,770.0234,2762,774.0234,2766,770.0234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2570" x2="2768" y1="770.0234" y2="770.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="185" x="2577" y="764.9575">toPersistence(buildingResult)</text><polygon fill="#A80036" points="2581,795.1563,2571,799.1563,2581,803.1563,2577,799.1563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="2575" x2="2778" y1="799.1563" y2="799.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="2587" y="794.0903">return rawBuilding</text><polygon fill="#A80036" points="3444.5,824.2891,3454.5,828.2891,3444.5,832.2891,3448.5,828.2891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="2570" x2="3450.5" y1="828.2891" y2="828.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="123" x="2577" y="823.2231">create(rawBuilding)</text><polygon fill="#A80036" points="2581,853.4219,2571,857.4219,2581,861.4219,2577,857.4219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="2575" x2="3460.5" y1="857.4219" y2="857.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="159" x="2587" y="852.356">return buildingDocument</text><polygon fill="#A80036" points="2383,882.5547,2373,886.5547,2383,890.5547,2379,886.5547" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="2377" x2="2564" y1="886.5547" y2="886.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="2389" y="881.4888">saved buildingDocument</text><polygon fill="#A80036" points="2149,911.6875,2139,915.6875,2149,919.6875,2145,915.6875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="2143" x2="2366" y1="915.6875" y2="915.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="2155" y="910.6216">saved buildingDocument</text><polygon fill="#A80036" points="2762,940.8203,2772,944.8203,2762,948.8203,2766,944.8203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2138" x2="2768" y1="944.8203" y2="944.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="138" x="2145" y="939.7544">toDTO(buildingResult)</text><polygon fill="#A80036" points="2149,969.9531,2139,973.9531,2149,977.9531,2145,973.9531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="2143" x2="2778" y1="973.9531" y2="973.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="2155" y="968.8872">buildingDTOResult</text><polygon fill="#A80036" points="1860,999.0859,1850,1003.0859,1860,1007.0859,1856,1003.0859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1854" x2="2127" y1="1003.0859" y2="1003.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="1866" y="998.02">buildingDTOResult</text><polygon fill="#A80036" points="1611,1028.2188,1601,1032.2188,1611,1036.2188,1607,1032.2188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1605" x2="1838" y1="1032.2188" y2="1032.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="215" x="1617" y="1027.1528">Return successful Result with DTO</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1515" x2="3536" y1="1041.2188" y2="1041.2188"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="160" x="1520" y="1051.4292">[building creation failed]</text><polygon fill="#A80036" points="1860,1072.1563,1850,1076.1563,1860,1080.1563,1856,1076.1563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1854" x2="2127" y1="1076.1563" y2="1076.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="74" x="1866" y="1071.0903">Error Result</text><polygon fill="#A80036" points="1611,1101.2891,1601,1105.2891,1611,1109.2891,1607,1105.2891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1605" x2="1838" y1="1105.2891" y2="1105.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="74" x="1617" y="1100.2231">Error Result</text><path d="M823.5,1134.2891 L887.5,1134.2891 L887.5,1141.2891 L877.5,1151.2891 L823.5,1151.2891 L823.5,1134.2891 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="148.4688" style="stroke: #000000; stroke-width: 2.0;" width="851.5" x="823.5" y="1134.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="838.5" y="1147.356">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="269" x="902.5" y="1146.4995">[BuildingsService returns a failure Result]</text><polygon fill="#A80036" points="1247,1168.5547,1237,1172.5547,1247,1176.5547,1243,1172.5547" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1241" x2="1589" y1="1172.5547" y2="1172.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="197" x="1253" y="1167.4888">Send response with status 402</text><polygon fill="#A80036" points="883,1197.6875,873,1201.6875,883,1205.6875,879,1201.6875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="877" x2="1225" y1="1201.6875" y2="1201.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="197" x="889" y="1196.6216">Send response with status 402</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="823.5" x2="1675" y1="1210.6875" y2="1210.6875"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="295" x="828.5" y="1220.8979">[BuildingsService returns a successful Result]</text><polygon fill="#A80036" points="1247,1241.625,1237,1245.625,1247,1249.625,1243,1245.625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1241" x2="1589" y1="1245.625" y2="1245.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="330" x="1253" y="1240.5591">Send response with status 201 and the buildingDTO</text><polygon fill="#A80036" points="883,1270.7578,873,1274.7578,883,1278.7578,879,1274.7578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="877" x2="1225" y1="1274.7578" y2="1274.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="330" x="889" y="1269.6919">Send response with status 201 and the buildingDTO</text><polygon fill="#A80036" points="692,1306.8906,682,1310.8906,692,1314.8906,688,1310.8906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="686" x2="871" y1="1310.8906" y2="1310.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="113" x="698" y="1305.8247">Forward response</text><polygon fill="#A80036" points="457,1336.0234,447,1340.0234,457,1344.0234,453,1340.0234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="451" x2="680" y1="1340.0234" y2="1340.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="211" x="463" y="1334.9575">Display result (success or failure)</text><polygon fill="#A80036" points="244,1365.1563,234,1369.1563,244,1373.1563,240,1369.1563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="238" x2="445" y1="1369.1563" y2="1369.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="154" x="250" y="1364.0903">Update view accordingly</text><polygon fill="#A80036" points="44,1394.2891,34,1398.2891,44,1402.2891,40,1398.2891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="38" x2="232" y1="1398.2891" y2="1398.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="50" y="1393.2231">Show final outcome to User</text><!--MD5=[10a5420005a0bafe6ecb54c0dbb47847]
@startuml lvl3_createBuilding

participant "User" as A
participant ":View" as sys
participant ":FE_Component" as comp
participant ":FE_Service" as FEsrvc
participant ":Routing" as route
participant "IBuildingController" as IB
participant "BuildingController" as B
participant "IBuildingsService" as IC
participant "BuildingsService" as C
participant "IBuildingsRepo" as ID
participant "BuildingsRepo" as D
participant "BuildingsMap" as F
participant "Building Entity" as E
participant "ConfigFile" as CONF
participant "IBuildingPersistence" as IH
participant "BuildingPersistence" as H
participant "BuildingSchema" as I

A -> sys: Accesses web interface
sys -> comp: Display building creation form
comp -> sys: User inputs building data
sys -> FEsrvc: Submit building data
FEsrvc -> route: Request to create building
route -> IB: Forward request (req, res, next)

A -> IB: send request to createBuilding(req, res, next)
activate IB
IB -> B:createBuilding(req, res, next)
activate B
B -> CONF : Injects Service
activate CONF

CONF -> B
deactivate CONF

B -> IC: createBuilding(req, res, next)
activate IC

IC -> C: createBuilding(req.body as IBuildingDTO)
activate C

C -> ID: findByName(buildingDTO.name)
activate ID

ID -> D: buildingDocument (or null)
deactivate ID
activate D
D - -> IH: 
activate IH
IH - -> H: 
activate H
H - -> IH: 
deactivate H
IH - -> D
deactivate IH
D - -> C: buildingDocument (or null)
deactivate D

alt building with the same name found
    C - -> B: Return failure Result
else building creation
    C -> F: ToDomain(req.body as IBuildingDTO)
    F -> E:
    activate E
    E - -> C: buildingOrError
    deactivate E
    
    alt building creation successful
        C -> ID: save(buildingResult)
        activate ID
        ID -> D: save(buildingResult)
        activate D
        D -> F: toPersistence(buildingResult)
        activate F 
        F - -> D : return rawBuilding
        deactivate F
        D - -> I: create(rawBuilding)
        activate I
        I - -> D : return buildingDocument
        deactivate I
        D - -> ID: saved buildingDocument
        deactivate D
        ID - -> C: saved buildingDocument
        deactivate ID
        
        C -> F: toDTO(buildingResult)
        activate F
        F - -> C: buildingDTOResult
        deactivate F
        C - -> IC : buildingDTOResult
        IC - -> B: Return successful Result with DTO
    else building creation failed
        C - -> IC: Error Result
        IC - -> B: Error Result
    end
end

alt BuildingsService returns a failure Result
    B -> IB: Send response with status 402
    IB -> route: Send response with status 402
else BuildingsService returns a successful Result
    B -> IB: Send response with status 201 and the buildingDTO
    IB -> route: Send response with status 201 and the buildingDTO
end

route -> FEsrvc: Forward response
FEsrvc -> comp: Display result (success or failure)
comp -> sys: Update view accordingly
sys -> A: Show final outcome to User

@enduml

PlantUML version 1.2020.02(Sun Mar 01 10:22:07 UTC 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.21+9
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>